<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
    <title>软件帮助</title>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <meta http-equiv="pragma" content="no-cache" />
    <meta http-equiv="cache-control" content="no-cache" />
    <meta http-equiv="expires" content="0" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0,maximum-scale=1.0, user-scalable=no" />
    <meta name="apple-mobile-web-app-capable" content="yes" />

    <link href="/Content/frozenui.css" rel="stylesheet" />
    <link href="/Content/common.css" rel="stylesheet" />

    <script src="/Scripts/jquery-1.12.4.js"></script>
    <script src="/Scripts/handlebars.js"></script>
    <script src="/Scripts/common.js"></script>
    <script src="/Scripts/article.js"></script>
</head>
<body>
    <header class="ui-header ui-header-positive">
        <i class="ui-icon-return" onclick="history.back();"></i>
        <h1><span id="articleTitle"></span></h1>
    </header>
    <footer class="ui-footer ui-footer-positive">
        <div id="author">

        </div>
    </footer>

    <section class="ui-container">
        <div id="articleContent">

        </div>
    </section>

    <script id="authorTemplate" type="text/x-handlebars-template">
        <ul class="ui-row-flex">
            <li class="ui-col ui-col-3">
                <span>作者:</span>
                <span>{{author}}</span>
                <span>创建日期:</span>
                <span>{{createDate}}</span>
            </li>
            <li class="ui-col ui-col">
                <a href="/soft/article/list.html?authorId={{author}}">更多</a>
            </li>
        </ul>
    </script>

    <script>
        var _article;
        $(document).ready(function () {
            pageInit();
        });

        function pageInit() {
            initArticle();
            _article.load();
        }

        function initArticle() {
            _article = new article();
            _article.articleId = getArticleId();
            _article.afterLoad = function () {
                var _self = this;
                $("#articleTitle").text(_self.articleTitle);
                var authorTemplate = createTemplate("authorTemplate");
                $("#author").html(authorTemplate(_self));
                $("#articleContent").html(_self.articleContent);
            }

        }

        function getArticleId() {
            var articleId = $.getQueryString("articleId");
            if (articleId == null) {
                return 0;
            } else {
                return parseInt(articleId);
            }
        }
    </script>

</body>
</html>
